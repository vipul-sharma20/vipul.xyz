<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.19.2 by Michael Rose
  Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Sharingan: Newspaper text and context extractor - Vipul Sharma</title>
<meta name="description" content="To all TL;DR folks, here is my elevator pitch:    Itâ€™s a tool to extract news articles from newspaper and give the context about the news   link to code:Â https://github.com/vipul-sharma20/sharingan   ">


  <meta name="author" content="Vipul Sharma">


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Vipul Sharma">
<meta property="og:title" content="Sharingan: Newspaper text and context extractor">
<meta property="og:url" content="http://0.0.0.0:4000/2017/03/sharingan-newspaper-text-and-context-extractor.html">


  <meta property="og:description" content="To all TL;DR folks, here is my elevator pitch:    Itâ€™s a tool to extract news articles from newspaper and give the context about the news   link to code:Â https://github.com/vipul-sharma20/sharingan   ">







  <meta property="article:published_time" content="2017-03-13T14:30:12+05:30">






<link rel="canonical" href="http://0.0.0.0:4000/2017/03/sharingan-newspaper-text-and-context-extractor.html">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "Vipul Sharma",
      "url": "http://0.0.0.0:4000/"
    
  }
</script>






<!-- end _includes/seo.html -->


<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Vipul Sharma Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">

<!--[if IE]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



    <link href="https://fonts.googleapis.com/css2?family=Gentium+Basic:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">


  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">
          Vipul
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/scribbles/">Scribbles</a>
            </li><li class="masthead__menu-item">
              <a href="/music/">Music</a>
            </li><li class="masthead__menu-item">
              <a href="/about/">About</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.99 16">
            <path d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z" transform="translate(-.01)"></path>
          </svg>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  
    <div class="author__avatar">
      
        <img src="/assets/images/me.jpg" alt="Vipul Sharma" itemprop="image">
      
    </div>
  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name">Vipul Sharma</h3>
    
    
      <div class="author__bio" itemprop="description">
        <p>Engineer at Vernacular.ai</p>

      </div>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name">India</span>
        </li>
      

      
        
          
            <li><a href="https://github.com/vipul-sharma20" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i><span class="label">GitHub</span></a></li>
          
        
          
            <li><a href="https://www.linkedin.com/in/vipul20/" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span class="label">Linkedin</span></a></li>
          
        
          
            <li><a href="https://instagram.com/vipul.py" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-instagram" aria-hidden="true"></i><span class="label">Instagram</span></a></li>
          
        
          
            <li><a href="https://twitter.com/vipul_sharma" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i><span class="label">Twitter</span></a></li>
          
        
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Sharingan: Newspaper text and context extractor">
    <meta itemprop="description" content="To all TL;DR folks, here is my elevator pitch:  Itâ€™s a tool to extract news articles from newspaper and give the context about the news  link to code:Â https://github.com/vipul-sharma20/sharingan">
    <meta itemprop="datePublished" content="2017-03-13T14:30:12+05:30">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">Sharingan: Newspaper text and context extractor
</h1>
          
        </header>
      

      <section class="page__content" itemprop="text">
        
        <p>To all TL;DR folks, here is my elevator pitch:</p>
<ul>
  <li>Itâ€™s a tool to extract news articles from newspaper and give the context about the news</li>
  <li>link to code:Â <a href="https://github.com/vipul-sharma20/sharingan">https://github.com/vipul-sharma20/sharingan</a></li>
</ul>

<p>SharinganÂ is a tool built on Python 3.6 using OpenCV 3.2 to extract news content as text from newspaperâ€™s photo and perform news context extraction.</p>

<p>Note: This is a fun project I started out of curiosity and is still under development. It is still not mature enough to produce very accurate results.
The working can be divided into two tasks:</p>
<ul>
  <li>Image processing and text recognition</li>
  <li>Context extraction</li>
</ul>

<h2 id="image-processing-and-text-extraction">Image processing and text extraction</h2>

<p>Our ROI is the text content of the page and therefore, some image processing is required to highlight and extract the text content from the image. Also, the appropriate text content highlighted requires some more processing and cleaning so that there is no noise and false positives while OCR is performed.</p>

<h2 id="how">HowÂ ?</h2>
<ul>
  <li>Capture image</li>
  <li>Detect edges</li>
  <li>Extract desired object / define contours</li>
  <li>Thresholding text content</li>
  <li>OCR (usingÂ tesseract)</li>
</ul>

<h2 id="1-capture-image">1. Capture Image</h2>

<p><img src="/assets/images/raw.jpeg" alt="alt text" title="No Image" /></p>

<h2 id="2-detect-edges">2. Detect Edges</h2>

<p>Edge detection technique is used to find boundaries of objects in an image by analyzing varying brightness in the image. Here, it is being used for segmenting image. More precisely, Iâ€™ve used Canny Edge Detection technique.</p>

<p><img src="/assets/images/edge.jpeg" alt="alt text" title="No Image" /></p>

<h2 id="3-dilation">3. Dilation</h2>

<p>Detecting contours for text at this point will lead to hundreds of nonsensical contours. To achieve a confident boundary detection Iâ€™ve used dilation here which is a process of dilating. It increases the white region in the image or size of foreground object. In informal terms, it leaks the white pixels to its neighborhood so that it transforms the text area as more solid looking</p>

<p><img src="/assets/images/dilated.jpeg" alt="alt text" title="No Image" /></p>

<h2 id="4-finding-contours-and-contour-approximation">4. Finding Contours and Contour Approximation</h2>

<p>Finding contours around the white pixels</p>

<p><img src="/assets/images/contours.jpeg" alt="alt text" title="No Image" /></p>

<p><strong>Contour approximation:</strong> It approximates a contour shape to another shape with less number of vertices depending upon the precision we specify. After performing contour approximation I got this</p>

<p><img src="/assets/images/approximation.jpeg" alt="alt text" title="No Image" /></p>

<h2 id="what-i-got-">What I got ?</h2>

<p>By employing techniques mentioned above, I ended up with these:</p>

<p><img src="/assets/images/extracted.png" alt="alt text" title="No Image" /></p>

<h2 id="inference">Inference</h2>

<p>Itâ€™s evident that our logic was able to crop out the text content from the page but it also acquired few false positives which can be filtered out in this case with small tweaking. Also, our logic couldnâ€™t isolate the image content (TODO: fix this).</p>

<h2 id="clean-images-for-text-extraction">Clean images for text extraction</h2>

<p>I implemented adaptive binary thresholding to clean and highlight the text area</p>

<p><img src="/assets/images/thresholded.png" alt="alt text" title="No Image" /></p>

<h2 id="text-extraction">Text Extraction</h2>

<p>Iâ€™ve used tesseract to extract the text from the segmented images.</p>
<blockquote>
  <p>Tesseract was originally developed at Hewlett-Packard Laboratories Bristol and at Hewlett-Packard Co, Greeley Colorado between 1985 and 1994, with some more changes made in 1996 to port to Windows, and some C++izing in 1998.
In 2005 Tesseract was open sourced by HP. Since 2006 it is developed by Google.</p>
</blockquote>

<h2 id="manual-mode">Manual Mode</h2>

<p>Sharingan provides both automatic and manual segmentation mode. Below is the demo of manual segmentation.</p>

<p><img src="/assets/images/manual_mode.gif" alt="alt text" title="No Image" />
<img src="/assets/images/manual_mode1.gif" alt="alt text" title="No Image" /></p>

<h2 id="context-extraction">Context extraction</h2>

<p>The phrase structure of a sentence in English is of the form:</p>

<p><img src="/assets/images/phrase.png" alt="alt text" title="No Image" /></p>

<p>The above rule means that a sentence (S) consists of a Noun Phrase (NP) and a Verb Phrase(VP). We can further define grammar for a Noun Phrase but letâ€™s not get into that ğŸ™‚</p>

<p>A Verb Phrase defines the action performed on or by the object whereas a Noun Phrase function as verb subject or object in a sentence. Therefore, NP can be used to extract the important topics from the sentences.
Iâ€™ve used Brown Corpus in Natural Language Toolkit (NLTK) for Part Of Speech (POS) tagging of the sentences and defined custom Context Free Grammar (CFG) for extracting NP.</p>

<blockquote>
  <p>â€œThe Brown Corpus was the first million-word electronic corpus of English, created in 1961 at Brown University. This corpus contains text from 500 sources, and the sources have been categorized by genre, such as news, editorial, and so on.â€</p>
</blockquote>

<p>A part-of-speech tagger, or POS-tagger, processes a sequence of words, and attaches a part of speech tag to each word.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">text</span> <span class="o">=</span> <span class="n">word_tokenize</span><span class="p">(</span><span class="s">"And now for something completely different"</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">nltk</span><span class="p">.</span><span class="n">pos_tag</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
<span class="p">[(</span><span class="s">'And'</span><span class="p">,</span> <span class="s">'CC'</span><span class="p">),</span> <span class="p">(</span><span class="s">'now'</span><span class="p">,</span> <span class="s">'RB'</span><span class="p">),</span> <span class="p">(</span><span class="s">'for'</span><span class="p">,</span> <span class="s">'IN'</span><span class="p">),</span> <span class="p">(</span><span class="s">'something'</span><span class="p">,</span> <span class="s">'NN'</span><span class="p">),</span>
<span class="p">(</span><span class="s">'completely'</span><span class="p">,</span> <span class="s">'RB'</span><span class="p">),</span> <span class="p">(</span><span class="s">'different'</span><span class="p">,</span> <span class="s">'JJ'</span><span class="p">)]</span>
</code></pre></div></div>

<p>In my context extractor script, Iâ€™ve used unigram as well as bigram POS tagging. A unigram tagger is based on a simple statistical algorithm: For every token/word assign a tag that is more likely for that token/word which is decided as per the lookup match found in the trained data. The drawback of unigram tagging is, we can just tag a token with a â€œmost likelyâ€ tag in isolation with the larger context of the text.</p>

<p>Therefore, for better results we use an n-gram tagger, whose context is current token along with the POS tags of preceding n-1 tokens. The problem with n-gram taggers is sparse data problem which is quite immanent in NLP.</p>

<blockquote>
  <p>â€œAs n gets larger, the specificity of the contexts increases, as does the chance that the data we wish to tag contains contexts that were not present in the training data.â€</p>
</blockquote>

<p>Iâ€™ve also defined a custom CFG to extract Noun Phrases from the POS tagged list of tokens.</p>

<p>Applying all this logic to get the keypoints from the text content extracted above gives:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[â€˜residential terracesâ€™, â€˜busy marketsâ€™, â€˜Puppiesâ€™, â€˜inhumane conditionsâ€™,
â€˜popular e-commerce sitesâ€™, â€˜Sriramapuramâ€™, â€˜Russell Marketâ€™,
â€˜issue licencesâ€™, â€˜meeting conditionsâ€™, â€˜positive impactâ€™, â€˜pet ownersâ€™,
â€˜R. Shantha Kumarâ€™, â€˜welfare ofï¬cerâ€™, â€˜Animal Welfare Boardâ€™, â€˜Indiaâ€™]
[â€˜Kittieâ€™]
[â€˜Compassion Unlimitedâ€™]
[â€˜public spacesâ€™, â€˜Animalâ€™, â€˜rights activistsâ€™, â€˜civic bodyâ€™, â€˜Bengaluruâ€™],
[â€˜BENGALURUâ€™, â€˜Bruhat Bengaluru Mahanagar Palikeâ€™, â€˜Daneâ€™, â€˜English Mastiffâ€™,
â€˜Bulldogâ€™, â€˜Boxerâ€™, â€˜Rottweilerâ€™, â€˜Bernardâ€™, â€˜Shepherdâ€™, â€˜Retrieverâ€™,
â€˜draft guidelinesâ€™, â€˜sterilisationâ€™, â€˜pet dogs â€™, â€˜Ownersâ€™]
</code></pre></div></div>

<p>As said earlier, this project is still under development and requires more tuning to perform better and produce accurate results.</p>

<p>If anyone is kind enough to help me or suggestions for this project; I am typically online as vipul20 at freenode ğŸ™‚</p>


        
      </section>

      <footer class="page__meta">
        
        


        
          <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2017-03-13T14:30:12+05:30">March 13, 2017</time></p>
        
      </footer>

      

      
  <nav class="pagination">
    
      <a href="/2016/03/introduction-to-decorators-in-python.html" class="pagination--pager" title="Introduction to decorators in Python
">Previous</a>
    
    
      <a href="/2017/09/performance-analysis-goroutine-pythons-coroutine.html" class="pagination--pager" title="Performance Analysis: Goroutine &amp; Pythonâ€™s Coroutine
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
</div>

    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    
      
        
          <li><a href="https://github.com/vipul-sharma20" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
        
          <li><a href="https://www.linkedin.com/in/vipul20/" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i> Linkedin</a></li>
        
      
        
          <li><a href="https://instagram.com/vipul.py" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-instagram" aria-hidden="true"></i> Instagram</a></li>
        
      
        
          <li><a href="https://twitter.com/vipul_sharma" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
        
      
    

    <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2020 Vipul Sharma. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>
  <script src="https://kit.fontawesome.com/4eee35f757.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>







  </body>
</html>
